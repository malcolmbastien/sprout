---
---
<div id="search-container" class="w-full">
    <div id="search-box"></div>
</div>

<script is:inline>
  function initSearch() {
    if (typeof PagefindUI !== 'undefined') {
        new PagefindUI({ 
            element: "#search-box", 
            showSubResults: true,
            resetFilters: true,
            translations: {
                placeholder: "Search the garden..."
            }
        });
        
        // Auto-focus the search input
        setTimeout(() => {
            const searchInput = document.querySelector(".pagefind-ui__search-input");
            if (searchInput) {
                searchInput.focus();
            }
        }, 100);
    } else {
        const container = document.querySelector("#search-box");
        if (container) {
            container.innerHTML = `
                <div class="text-xs text-slate-500 p-2 text-center border border-dashed border-slate-200 dark:border-slate-800 rounded-lg">
                    Search available after build
                </div>
            `;
        }
    }
  }

  window.addEventListener('DOMContentLoaded', initSearch);
</script>

<style is:global>
  @reference "../../styles/global.css";

  :root {
    --pagefind-ui-primary: #10b981;
    --pagefind-ui-text: #1f2937;
    --pagefind-ui-background: #ffffff;
    --pagefind-ui-border: #e5e7eb;
    --pagefind-ui-tag: #f3f4f6;
  }

  .dark {
    --pagefind-ui-primary: #10b981;
    --pagefind-ui-text: #f3f4f6;
    --pagefind-ui-background: #121812;
    --pagefind-ui-border: #1f2937;
    --pagefind-ui-tag: #1f2937;
  }

  #search-box .pagefind-ui__search-input {
    @apply rounded-xl border-slate-200 dark:border-slate-800 bg-white dark:bg-[#121812] text-base focus:ring-emerald-500/20 focus:border-emerald-500 transition-all py-3 px-14;
  }

  #search-box .pagefind-ui__result-link {
    @apply text-slate-900 dark:text-white font-bold hover:text-emerald-500 transition-colors text-lg;
  }

  #search-box .pagefind-ui__result-excerpt {
    @apply text-slate-600 dark:text-slate-400 text-sm mt-1;
  }
  
  #search-box .pagefind-ui__result {
    @apply border-b border-slate-100 dark:border-slate-800 pb-6 mb-6 last:border-0;
  }
</style>
