---
interface Props {
    counts: {
        all: number;
        seed: number;
        sprout: number;
        evergreen: number;
    };
    sortedNotes: any[];
    allNotes: any[];
    progressColors: {
        seed: string;
        sprout: string;
        evergreen: string;
    };
}

const { counts, sortedNotes, allNotes, progressColors } = Astro.props;
---

<div
    class="bg-white dark:bg-[#121812] border border-slate-200 dark:border-slate-800 rounded-xl p-4"
>
    <h3 class="text-sm font-semibold text-slate-900 dark:text-slate-100 mb-4">
        Stats
    </h3>
    <div class="space-y-4">
        <div class="flex justify-between items-end">
            <span
                class="text-sm text-slate-600 dark:text-slate-400"
                >Total Thoughts</span
            >
            <span
                class="text-2xl font-bold text-slate-900 dark:text-slate-100"
                >{counts.all}</span
            >
        </div>
        <div
            class="w-full bg-slate-100 dark:bg-slate-800 h-2 rounded-full overflow-hidden flex"
        >
            <div
                class={`h-full ${progressColors.seed}`}
                style={`width: ${(sortedNotes.filter((p) => p.data.stage === "seed").length / (allNotes.length || 1)) * 100}%`}
            >
            </div>
            <div
                class={`h-full ${progressColors.sprout}`}
                style={`width: ${(sortedNotes.filter((p) => p.data.stage === "sprout").length / (allNotes.length || 1)) * 100}%`}
            >
            </div>
            <div
                class={`h-full ${progressColors.evergreen}`}
                style={`width: ${(sortedNotes.filter((p) => p.data.stage === "evergreen").length / (allNotes.length || 1)) * 100}%`}
            >
            </div>
        </div>
        <div class="pt-4 border-t border-slate-100 dark:border-slate-800">
            <h4 class="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4">
                Taxonomy
            </h4>
            <div class="space-y-4">
                <div class="flex gap-3">
                    <span class="text-lg flex-shrink-0">ðŸŒ±</span>
                    <div class="min-w-0">
                        <div class="flex items-center gap-2">
                            <span class="text-xs font-semibold text-slate-900 dark:text-slate-100">Seedling</span>
                            <span class="text-[10px] font-medium px-1.5 py-0.5 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400">{counts.seed}</span>
                        </div>
                        <p class="text-[11px] text-slate-500 dark:text-slate-400 leading-relaxed mt-0.5">
                            Raw fragments and fleeting thoughts. Fragile starting points or skeletal outlines waiting for cultivation.
                        </p>
                    </div>
                </div>
                <div class="flex gap-3">
                    <span class="text-lg flex-shrink-0">ðŸŒ¿</span>
                    <div class="min-w-0">
                        <div class="flex items-center gap-2">
                            <span class="text-xs font-semibold text-slate-900 dark:text-slate-100">Sprout</span>
                            <span class="text-[10px] font-medium px-1.5 py-0.5 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400">{counts.sprout}</span>
                        </div>
                        <p class="text-[11px] text-slate-500 dark:text-slate-400 leading-relaxed mt-0.5">
                            Ideas taking root and branching out. Posts with growing structure, contextual links, and developing themes.
                        </p>
                    </div>
                </div>
                <div class="flex gap-3">
                    <span class="text-lg flex-shrink-0">ðŸŒ²</span>
                    <div class="min-w-0">
                        <div class="flex items-center gap-2">
                            <span class="text-xs font-semibold text-slate-900 dark:text-slate-100">Evergreen</span>
                            <span class="text-[10px] font-medium px-1.5 py-0.5 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400">{counts.evergreen}</span>
                        </div>
                        <p class="text-[11px] text-slate-500 dark:text-slate-400 leading-relaxed mt-0.5">
                            Enduring and deeply interconnected insights. Polished, atomic notes that have been refined over time.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
